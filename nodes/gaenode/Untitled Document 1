$in 2 div					#Put the input amount on the stack, divide it in half and put the result on the stack
send<1BLMuWbFrxtWg9Z4BHWvQW8RekasuphDE4>	#Send half to this address
$in 2 div					#repeat the above
send<1HaEXpZiQMR9r1rUtLzB9scyUPu1NVtCSP>	#send half to this address
pushtx						#send the transaction we've built




$in		#push the amount that we have on the stack
10000000000	#push 10*1e9 on the stack
rate<usdbtc,coinbase>	#Treat 10*1e9 as the amount of nanoUSD ($10) to convert to nanoBTC using the coinbase exchange rate
duplicate		#two copies on the stack of the btc amount
send<1BLMuWbFrxtWg9Z4BHWvQW8RekasuphDE4>	#send $10 to coinbase to be converted to dollars for the materials costs
sub			#compute $in-amount using the copy
send<1HaEXpZiQMR9r1rUtLzB9scyUPu1NVtCSP>	#keep whatever is left over as bitcoin
pushtx


$in		#push the amount that we have on the stack
10000000000	#push 10*1e9 on the stack
rate<usdbtc,coinbase>	#Treat 10*1e9 as the amount of nanoUSD ($10) to convert to nanoBTC using the coinbase exchange rate
duplicate		#two copies on the stack of the btc amount
send<1BLMuWbFrxtWg9Z4BHWvQW8RekasuphDE4>	#send $10 to coinbase to be converted to dollars for the materials costs
sub			#compute $in-amount using the copy
duplicate		#make two copies of the leftover
2 div			#half the leftover goes to btc
send<1HaEXpZiQMR9r1rUtLzB9scyUPu1NVtCSP>
2 div			#the other half goes to  personal coinbase
send<1Hp3mSYVrREmQtKGS5hrMVmc8uLbN6nskN>
pushtx

$balance
rate<usdbtc,coinbase>

